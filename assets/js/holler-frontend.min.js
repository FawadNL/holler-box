!function(e,o,t,i){var n={};n.init=function(){n.newVisitor=!1,n.checkCookie(),e.hollerVars.active&&n.doActive(e.hollerVars.active)},n.checkCookie=function(){""===n.getCookie("hwp_visit")?(n.setCookie("hwp_visit",Date.now(),parseInt(e.hollerVars.expires)),n.setCookie("hwp_new","true",1),n.newVisitor=!0):""!=n.getCookie("hwp_new")&&(n.newVisitor=!0)},n.doActive=function(e){for(var o=0;o<e.length;o++)n.doChecks(e[o])},n.doChecks=function(i,r){var a=o.getElementById("hwp-"+i);if(a){var s=e.hollerVars[i];if(s.visitor&&("new"!==s.visitor||1==n.newVisitor)&&!("returning"===s.visitor&&0!=n.newVisitor||"interacts"===s.showSettings&&""!=n.getCookie("hwp_"+i+"_int"))){"1"===e.hollerVars.isMobile&&"holler-banner"!=s.position&&(n.setCookie("hwp-"+i+"_hide","true",1),n.countNoteShown(i));var l=n.getCookie("hwp_"+i+"_shown");if("hide_for"!==s.showSettings||"true"!==l)if(s.bgColor&&(a.style.backgroundColor=s.bgColor,t("#hwp-"+i+" .hwp-first-row").css("background-color",s.bgColor)),s.btnColor1&&t("#hwp-"+i+" .hwp-email-btn, .hwp-btn-"+i).css("background-color",s.btnColor1),"scroll"!=s.display_when){if("exit"===s.display_when&&!r||"link"===s.display_when&&!r)return;var h="delay"===s.display_when?parseInt(s.delay):0;setTimeout(function(){n.showNote(i),n.countNoteShown(i)},1e3*h)}else n.detectScroll(i)}}},n.noteListeners=function(e){t("body").on("click",".hwp-close",n.hideItem).on("click",".hwp-floating-btn",n.btnClick).on("click",".hwp-text i",n.sendText).on("click","#hwp-"+e+" .hwp-email-btn",n.emailSubmitClick),t(".hwp-text-input").on("keypress",n.submitChatTextOnEnter),t("#hwp-"+e+" .hwp-email-input").on("keypress",n.submitEmailOnEnter),t("#hwp-"+e+" a").on("click",n.interactionLink)},n.detectScroll=function(i){t(e).scroll(n.debounce(function(){t(e).scrollTop()/(t(o).height()-t(e).height())>.5&&!n.show["hwp-"+i]&&(n.showNote(i),n.show["hwp-"+i]=!0,n.countNoteShown(i))},250))},n.showNote=function(i){var r=e.hollerVars[i],a=o.getElementById("hwp-"+i);"true"===n.getCookie("hwp-"+i+"_hide")?(n.transitionOut(a),"1"!=r.hideBtn&&"holler-banner"!=r.position&&(console.log(t(".hwp-btn-"+i)),n.transitionIn(t(".hwp-btn-"+i)))):(n.transitionIn(a),t("#hwp-"+i+" .hwp-first-row").html(r.content),"1"!=r.hideBtn&&"holler-banner"!=r.position&&n.transitionOut(t(".hwp-btn-"+i)),"1"===r.showEmail&&"1"!=r.showChat&&n.showEmailSubmit(i),"1"===r.showChat&&n.transitionIn(o.querySelector("#hwp-"+i+" .hwp-chat"))),"1"===r.hideBtn&&n.hide(t(".hwp-btn-"+i)),"holler-banner"===r.position&&"true"!=n.getCookie("hwp-"+i+"_hide")&&n.toggleBnrMargin(i),"delay"===r.hide_after&&setTimeout(function(){n.transitionOut(a)},1e3*parseInt(r.hide_after_delay))},n.setCookie=function(e,t,i,n){var r=new Date;r.setTime(r.getTime()+24*i*60*60*1e3);var a="expires="+r.toUTCString();return n||(n="/"),o.cookie=e+"="+t+";"+a+";path="+n,t},n.getCookie=function(e){for(var t=e+"=",i=decodeURIComponent(o.cookie).split(";"),n=0;n<i.length;n++){for(var r=i[n];" "==r.charAt(0);)r=r.substring(1);if(0==r.indexOf(t))return r.substring(t.length,r.length)}return""},n.debounce=function(e,o){var t=null;return function(){var i=this,n=arguments;clearTimeout(t),t=setTimeout(function(){e.apply(i,n)},o)}},n.toggleBnrMargin=function(e,o){if(t("body").css("padding-top",""),!o){var i=t("#hwp-"+e).outerHeight();t("body").css("padding-top",i)}},n.hideItem=function(e){e.stopImmediatePropagation();var o=t(e.target).closest(".holler-box"),i=o.attr("id").split("-")[1];return n.toggleHide(i),o.hasClass("holler-banner")&&n.toggleBnrMargin(i,!0),!1},n.btnClick=function(e){e.stopImmediatePropagation();var o=t(this).data("id");n.toggleHide(o)},n.toggleHide=function(e){"true"===n.getCookie("hwp-"+e+"_hide")?n.setCookie("hwp-"+e+"_hide","true",-1):n.setCookie("hwp-"+e+"_hide","true",1),n.showNote(e)},n.transitionIn=function(e){t(e).css("display","block"),setTimeout(function(){t(e).addClass("hwp-transition-in").removeClass("hwp-hide")},1),setTimeout(function(){t(e).removeClass("hwp-transition-in").addClass("hwp-show")},300)},n.transitionOut=function(e){t(e).addClass("hwp-transition-out").removeClass("hwp-show"),setTimeout(function(){t(e).removeClass("hwp-transition-out").addClass("hwp-hide"),t(e).css("display","")},200)},n.show=function(e){e.style.display="block",t(e).removeClass("hwp-hide").addClass("hwp-show")},n.hide=function(e){t(e).removeClass("hwp-show").addClass("hwp-hide"),t(e).css("display","")},n.checkExistingMsg=function(){var o=e.localStorage.getItem("hwp-full-msg");if(o&&""!=o){for(var i=o.split("/n"),r=0;r<i.length;r++)t("#"+n.activeID+" .hwp-box-rows").append('<div class="hwp-row hwp-visitor-row">'+i[r]+"</div>");n.showEmailSubmit()}},n.submitChatTextOnEnter=function(e){if(e.target.value&&""!=e.target.value&&13==e.keyCode){var o=t(e.target).closest(".holler-box").attr("id").split("-")[1];n.submitText(e.target.value,o),e.target.value=""}},n.submitEmailOnEnter=function(e){if(e.target.value&&""!=e.target.value&&13==e.keyCode){var o=t(e.target).closest(".holler-box").attr("id").split("-")[1];e.preventDefault(),n.emailSubmitted(o)}},n.sendText=function(e){e.stopImmediatePropagation();var o=t(e.target).closest(".holler-box").attr("id").split("-")[1],i=t("#hwp-"+o+" .hwp-text-input").val();i&&""!=i&&(n.submitText(i,o),t("#hwp-"+o+" .hwp-text-input").val("").focus())},n.submitText=function(o,i){var r=e.localStorage.getItem("hwp-full-msg");t("#hwp-"+i+" .hwp-box-rows").append('<div class="hwp-row hwp-visitor-row">'+o+"</div>"),r?r+="\n"+o:r=o,e.localStorage.setItem("hwp-full-msg",r),setTimeout(function(){n.showEmailSubmit(i)},5e3)},n.showEmailSubmit=function(i){var n=t("#hwp-"+i+" .hwp-email-row"),r=e.hollerVars[i];n.hasClass("hwp-show")||(o.querySelector("#hwp-"+i+" .hwp-email-input").setAttribute("placeholder",r.placeholder),t(".hwp-away-msg").remove(),t("#hwp-"+i).addClass("has-optin"),n.removeClass("hwp-hide").addClass("hwp-show"),n.prepend('<span class="hwp-away-msg">'+r.optinMsg+"</span>"))},n.emailSubmitClick=function(e){e.stopImmediatePropagation(),e.preventDefault();var o=t(e.target).closest(".holler-box").attr("id").split("-")[1];n.emailSubmitted(o)},n.emailSubmitted=function(o){var i=t("#hwp-"+o+" .hwp-email-input").val();if(i)if(-1!==i.indexOf("@")&&-1!==i.indexOf(".")){if(""==t("#hwp-"+o+" input[name=hwp_hp]").val())if("ck"!==e.hollerVars[o].emailProvider)if("mc"!==e.hollerVars[o].emailProvider)if("mailpoet"!==e.hollerVars[o].emailProvider){var r=e.localStorage.getItem("hwp-full-msg");n.sendMsg(i,r,o)}else n.mpSubscribe(i,o);else n.mcSubscribe(i,o);else n.ckSubscribe(i,o)}else alert("Something is wrong with your email, please try again.")},n.ckSubscribe=function(o,i){var r=e.hollerVars[i],a="https://api.convertkit.com/v3/forms/"+t("#hwp-"+i+" .ck-form-id").val()+"/subscribe";n.showSpinner(i),t.ajax({method:"POST",url:a,data:{email:o,api_key:r.ckApi}}).done(function(e){n.showConfirmation(i),t("#hwp-"+i+" .hwp-email-row").hide(),n.conversion(i)}).fail(function(e){n.hideSpinner(),t("#hwp-"+i+" .hwp-email-row").prepend('<span id="hwp-err">There seems to be a problem, can you try again?</span>'),setTimeout(function(){t("#hwp-err").remove()},3e3),console.log(e)})},n.mcSubscribe=function(o,i){var r=t("#hwp-"+i+" .mc-list-id").val(),a=t("#hwp-"+i+" .mc-interests").val();a&&(a=JSON.parse(a)),r?(n.showSpinner(i),t.ajax({method:"GET",url:e.hollerVars.ajaxurl,data:{email:o,list_id:r,action:"hwp_mc_subscribe",interests:a,nonce:e.hollerVars.hwpNonce}}).done(function(e){n.showConfirmation(i),t("#hwp-"+i+" .hwp-email-row").hide(),n.conversion(i)}).fail(function(e){console.log(e),n.hideSpinner()})):alert("MailChimp list ID is missing.")},n.mpSubscribe=function(o,i){var r=t("#hwp-"+i+" .mailpoet-list-id").val();r?(n.showSpinner(i),t.ajax({method:"GET",url:e.hollerVars.ajaxurl,data:{email:o,list_id:r,action:"hwp_mailpoet_subscribe",nonce:e.hollerVars.hwpNonce}}).done(function(e){console.log(e),n.showConfirmation(i),t("#hwp-"+i+" .hwp-email-row").hide(),n.conversion(i)}).fail(function(e){console.log(e),n.hideSpinner()})):alert("List ID is missing.")},n.sendMsg=function(o,i,r){n.showSpinner(r),t.ajax({method:"GET",url:e.hollerVars.ajaxurl,data:{email:o,id:r,msg:i,action:"hwp_send_email",nonce:e.hollerVars.hwpNonce}}).done(function(e){n.clearChat(r),n.showConfirmation(r),n.conversion(r)}).fail(function(e){console.log(e),n.hideSpinner()})},n.clearChat=function(o){t("#hwp-"+o+" .hwp-chat").hasClass("hwp-hide")||(e.localStorage.removeItem("hwp-full-msg"),t("#hwp-"+o+" .hwp-visitor-row, #hwp-"+o+" .hwp-away-msg").remove()),n.hide(t("#hwp-"+o+" .hwp-email-row"))},n.interactionLink=function(e){if("http://hollerwp.com/"!==e.target.href){var o=t(e.target).closest(".holler-box").attr("id").split("-")[1];n.conversion(o)}},n.conversion=function(o){var i={action:"hwp_track_event",nonce:e.hollerVars.hwpNonce,id:o};t.ajax({method:"GET",url:e.hollerVars.ajaxurl,data:i}).done(function(e){}).fail(function(e){console.log(e)}),n.setCookie("hwp_"+o+"_int","true",1)},n.showConfirmation=function(o){n.hideSpinner();var i=e.hollerVars[o],r=""!=i.confirmMsg?i.confirmMsg:"Thanks!";"holler-banner"===i.position?(t("#hwp-"+o+" .hwp-box-rows").addClass("hwp-full-width").html(r),n.toggleBnrMargin(o)):t("#hwp-"+o+" .hwp-first-row").html(r),"1"===i.showChat&&n.clearChat(o)},n.countNoteShown=function(o){n.noteListeners(o);var i=e.hollerVars[o],r=i.hideForDays?parseInt(i.hideForDays):1;n.setCookie("hwp_"+o+"_shown","true",r);var a={action:"hwp_track_view",nonce:e.hollerVars.hwpNonce,id:o};t.ajax({method:"GET",url:e.hollerVars.ajaxurl,data:a}).done(function(e){}).fail(function(e){})},n.showSpinner=function(o){t("#hwp-"+o+" .hwp-email-row").html('<img src="'+e.hollerVars.pluginUrl+'assets/img/loading.gif" class="hwp-loading" />')},n.hideSpinner=function(){t("img.hwp-loading").remove()},t(e).load(function(){n.init()}),e.hollerbox=n}(window,document,jQuery);