!function(e,i,o,t){var n={};n.init=function(){n.newVisitor=!1,n.checkForPreview()},n.checkForPreview=function(){var i=new URLSearchParams(e.location.search);if(i.has("hwp_preview")){var o=i.get("hwp_preview");return n.showNote(o),void n.noteListeners(o)}n.checkCookie(),e.hollerVars.active&&n.doActive(e.hollerVars.active)},n.checkCookie=function(){""===n.getCookie("hwp_visit")?(n.setCookie("hwp_visit",Date.now(),parseInt(e.hollerVars.expires)),n.setCookie("hwp_new","true",1),n.newVisitor=!0):""!=n.getCookie("hwp_new")&&(n.newVisitor=!0)},n.doActive=function(e){for(var i=0;i<e.length;i++)n.doChecks(e[i])},n.doChecks=function(t,a){if(i.getElementById("hwp-"+t)){var r=e.hollerVars[t];if(r.visitor&&("new"!==r.visitor||1==n.newVisitor)&&!("returning"===r.visitor&&0!=n.newVisitor||"interacts"===r.showSettings&&""!=n.getCookie("hwp_"+t+"_int")||""===e.hollerVars.isMobile&&"mobile_only"===r.devices||"1"===e.hollerVars.isMobile&&"desktop_only"===r.devices)){var s=n.getCookie("hwp_"+t+"_shown");if("hide_for"!==r.showSettings||"true"!==s||a){if("exit"===r.display_when){if("true"===n.getCookie("hwp-"+t+"_hide"))return;o("body").on("mouseleave",n.mouseExit)}if("scroll"!=r.display_when){if("exit"===r.display_when&&!a||"link"===r.display_when&&!a)return;var l="delay"===r.display_when?parseInt(r.delay):0;if("hwp-popup"===r.type&&"always"===r.showSettings)n.setCookie("hwp-"+t+"_hide","",-1);else if("hwp-popup"===r.type&&"interacts"===r.showSettings&&"true"===n.getCookie("hwp-"+t+"_hide"))return;setTimeout(function(){n.showNote(t),n.countNoteShown(t)},1e3*l)}else n.detectScroll(t)}}}},n.noteListeners=function(e){o("body").on("click",".hwp-close",n.hideItem).on("click",".hwp-floating-btn",n.btnClick).on("click",".hwp-text i",n.sendText).on("click","#hwp-"+e+" .hwp-email-btn",n.emailSubmitClick).on("click",".hwp-backdrop",n.bdClick),o(".hwp-text-input").on("keypress",n.submitChatTextOnEnter),o("#hwp-"+e+" .hwp-email-input").on("keypress",n.submitEmailOnEnter),o("#hwp-"+e+" a").on("click",n.interactionLink)},n.detectScroll=function(t){o(e).scroll(n.debounce(function(){o(e).scrollTop()/(o(i).height()-o(e).height())>.5&&!n.show["hwp-"+t]&&(n.showNote(t),n.show["hwp-"+t]=!0,n.countNoteShown(t))},250))},n.showNote=function(t){var a=e.hollerVars[t],r=i.getElementById("hwp-"+t);"hwp-popup"===a.type&&o(r).hasClass("hwp-show")?n.transitionOut(o("#hwp-bd-"+t)):"hwp-popup"===a.type&&n.transitionIn(o("#hwp-bd-"+t)),"true"===n.getCookie("hwp-"+t+"_hide")?(n.transitionOut(r),"1"===a.hideBtn&&"always"===a.showSettings&&n.setCookie("hwp-"+t+"_hide","",-1),"1"!=a.hideBtn&&"holler-banner"!=a.type&&n.transitionIn(o(".hwp-btn-"+t))):("fomo"===a.type?n.fomoContent(t,r):n.transitionIn(r),"1"!=a.hideBtn&&"holler-banner"!=a.type&&n.transitionOut(o(".hwp-btn-"+t)),"1"===a.showEmail&&"1"!=a.showChat&&n.showEmailSubmit(t),"1"===a.showChat&&n.transitionIn(i.querySelector("#hwp-"+t+" .hwp-chat"))),"1"===a.hideBtn&&n.hide(o(".hwp-btn-"+t)),"holler-banner"===a.type&&"true"!=n.getCookie("hwp-"+t+"_hide")&&n.toggleBnrMargin(t),"delay"===a.hide_after&&setTimeout(function(){n.transitionOut(r)},1e3*parseInt(a.hide_after_delay))},n.setCookie=function(e,o,t,n){var a=new Date;a.setTime(a.getTime()+24*t*60*60*1e3);var r="expires="+a.toUTCString();return n||(n="/"),i.cookie=e+"="+o+";"+r+";path="+n,o},n.getCookie=function(e){for(var o=e+"=",t=decodeURIComponent(i.cookie).split(";"),n=0;n<t.length;n++){for(var a=t[n];" "==a.charAt(0);)a=a.substring(1);if(0==a.indexOf(o))return a.substring(o.length,a.length)}return""},n.debounce=function(e,i){var o=null;return function(){var t=this,n=arguments;clearTimeout(o),o=setTimeout(function(){e.apply(t,n)},i)}},n.toggleBnrMargin=function(e,i){if(o("body").css("padding-top",""),!i){var t=o("#hwp-"+e).outerHeight();o("body").css("padding-top",t)}},n.hideItem=function(e){e.stopImmediatePropagation();var i=o(e.target).closest(".holler-box"),t=i.attr("id").split("-")[1];return n.toggleHide(t),i.hasClass("holler-banner")&&n.toggleBnrMargin(t,!0),!1},n.btnClick=function(e){e.stopImmediatePropagation();var i=o(this).data("id");n.toggleHide(i)},n.toggleHide=function(e){"true"===n.getCookie("hwp-"+e+"_hide")?n.setCookie("hwp-"+e+"_hide","true",-1):n.setCookie("hwp-"+e+"_hide","true",1),n.showNote(e)},n.transitionIn=function(e){o(e).css("display","block"),setTimeout(function(){o(e).addClass("hwp-transition-in").removeClass("hwp-hide")},1),setTimeout(function(){o(e).removeClass("hwp-transition-in").addClass("hwp-show")},300)},n.transitionOut=function(e){o(e).addClass("hwp-transition-out").removeClass("hwp-show"),setTimeout(function(){o(e).removeClass("hwp-transition-out").addClass("hwp-hide"),o(e).css("display","")},200)},n.show=function(e){e.style.display="block",o(e).removeClass("hwp-hide").addClass("hwp-show")},n.hide=function(e){o(e).removeClass("hwp-show").addClass("hwp-hide"),o(e).css("display","")},n.checkExistingMsg=function(){var i=e.localStorage.getItem("hwp-full-msg");if(i&&""!=i){for(var t=i.split("/n"),a=0;a<t.length;a++)o("#"+n.activeID+" .hwp-box-rows").append('<div class="hwp-row hwp-visitor-row">'+t[a]+"</div>");n.showEmailSubmit()}},n.submitChatTextOnEnter=function(e){if(e.target.value&&""!=e.target.value&&13==e.keyCode){var i=o(e.target).closest(".holler-box").attr("id").split("-")[1];n.submitText(e.target.value,i),e.target.value=""}},n.submitEmailOnEnter=function(e){if(e.target.value&&""!=e.target.value&&13==e.keyCode){var i=o(e.target).closest(".holler-box").attr("id").split("-")[1];e.preventDefault(),n.emailSubmitted(i)}},n.sendText=function(e){e.stopImmediatePropagation();var i=o(e.target).closest(".holler-box").attr("id").split("-")[1],t=o("#hwp-"+i+" .hwp-text-input").val();t&&""!=t&&(n.submitText(t,i),o("#hwp-"+i+" .hwp-text-input").val("").focus())},n.submitText=function(i,t){var a=e.localStorage.getItem("hwp-full-msg");o("#hwp-"+t+" .hwp-box-rows").append('<div class="hwp-row hwp-visitor-row">'+i+"</div>"),a?a+="\n"+i:a=i,e.localStorage.setItem("hwp-full-msg",a),setTimeout(function(){n.showEmailSubmit(t)},5e3)},n.showEmailSubmit=function(t){var n=o("#hwp-"+t+" .hwp-email-row"),a=e.hollerVars[t];n.hasClass("hwp-show")||(i.querySelector("#hwp-"+t+" .hwp-email-input").setAttribute("placeholder",a.placeholder),o(".hwp-away-msg").remove(),o("#hwp-"+t).addClass("has-optin"),n.removeClass("hwp-hide").addClass("hwp-show"),n.prepend('<span class="hwp-away-msg">'+a.optinMsg+"</span>"))},n.emailSubmitClick=function(e){e.stopImmediatePropagation(),e.preventDefault();var i=o(e.target).closest(".holler-box").attr("id").split("-")[1];n.emailSubmitted(i)},n.emailSubmitted=function(i){var t=o("#hwp-"+i+" .hwp-email-input").val();if(t){var a=o("#hwp-"+i+" .hwp-name").val(),r=o("#hwp-"+i+" .holler-title").text();if(-1!==t.indexOf("@")&&-1!==t.indexOf(".")){if(""==o("#hwp-"+i+" input[name=hwp_hp]").val())if("ck"!==e.hollerVars[i].emailProvider)if("mc"!==e.hollerVars[i].emailProvider)if("ac"!==e.hollerVars[i].emailProvider)if("mailpoet"!==e.hollerVars[i].emailProvider)if("drip"!==e.hollerVars[i].emailProvider){var s=e.localStorage.getItem("hwp-full-msg");n.sendMsg(t,a,s,i,r)}else n.dripSubscribe(t,i);else n.mpSubscribe(t,i);else n.acSubscribe(t,i);else n.mcSubscribe(t,i);else n.ckSubscribe(t,i)}else alert("Something is wrong with your email, please try again.")}else alert("We had a problem reading your email, please contact the site administrator.")},n.ckSubscribe=function(i,t){var a=e.hollerVars[t],r="https://api.convertkit.com/v3/forms/"+o("#hwp-"+t+" .ck-form-id").val()+"/subscribe",s=o("#hwp-"+t+" .hwp-name").val();n.showSpinner(t),o.ajax({method:"POST",url:r,data:{email:i,api_key:a.ckApi,first_name:s}}).done(function(e){n.showConfirmation(t),o("#hwp-"+t+" .hwp-email-row").hide(),n.conversion(t)}).fail(function(e){n.hideSpinner(),o("#hwp-"+t+" .hwp-email-row").prepend('<span id="hwp-err">There seems to be a problem, can you try again?</span>'),setTimeout(function(){o("#hwp-err").remove()},3e3),console.log(e)})},n.mcSubscribe=function(i,t){var a=o("#hwp-"+t+" .mc-list-id").val(),r=o("#hwp-"+t+" .hwp-name").val(),s=o("#hwp-"+t+" .mc-interests").val();s&&(s=JSON.parse(s)),a?(n.showSpinner(t),o.ajax({method:"GET",url:e.hollerVars.ajaxurl,data:{email:i,list_id:a,action:"hwp_mc_subscribe",interests:s,nonce:e.hollerVars.hwpNonce,name:r}}).done(function(e){n.showConfirmation(t),o("#hwp-"+t+" .hwp-email-row").hide(),n.conversion(t)}).fail(function(e){console.log(e),n.hideSpinner()})):alert("MailChimp list ID is missing.")},n.acSubscribe=function(i,t){var a=o("#hwp-"+t+" .ac-list-id").val(),r=o("#hwp-"+t+" .hwp-name").val();a?(n.showSpinner(t),o.ajax({method:"GET",url:e.hollerVars.ajaxurl,data:{email:i,list_id:a,action:"hwp_ac_subscribe",nonce:e.hollerVars.hwpNonce,name:r}}).done(function(e){console.log(e),1==e.success?(n.showConfirmation(t),o("#hwp-"+t+" .hwp-email-row").hide(),n.conversion(t)):(console.warn(e),o("#hwp-"+t+" .hwp-first-row").html("<p>"+e.data+"</p>"),n.hideSpinner())}).fail(function(e){console.warn(e),n.hideSpinner()})):alert("List ID is missing.")},n.dripSubscribe=function(i,t){if(e._dcq){var a=o("#hwp-"+t+" .drip-tags").val(),r=o("#hwp-"+t+" .hwp-name").val(),s=a.split(",");n.showSpinner(t),n.dripid=t;_dcq.push(["identify",{email:i,first_name:r,tags:s,success:n.dripResponse,failure:n.dripResponse}])}else alert("Drip code not installed properly.")},n.dripResponse=function(e){n.hideSpinner(),1==e.success?(n.showConfirmation(n.dripid),o("#hwp-"+n.dripid+" .hwp-email-row").hide(),n.conversion(n.dripid)):(console.warn(e),o("#hwp-"+n.dripid+" .hwp-first-row").html("<p>"+e.error+"</p>"))},n.mpSubscribe=function(i,t){var a=o("#hwp-"+t+" .mailpoet-list-id").val();if(a){var r=o("#hwp-"+t+" .hwp-name").val();n.showSpinner(t),o.ajax({method:"GET",url:e.hollerVars.ajaxurl,data:{email:i,list_id:a,action:"hwp_mailpoet_subscribe",nonce:e.hollerVars.hwpNonce,name:r}}).done(function(e){console.log(e),n.showConfirmation(t),o("#hwp-"+t+" .hwp-email-row").hide(),n.conversion(t)}).fail(function(e){console.log(e),n.hideSpinner()})}else alert("List ID is missing.")},n.sendMsg=function(i,t,a,r,s){n.showSpinner(r),o.ajax({method:"GET",url:e.hollerVars.ajaxurl,data:{email:i,name:t,id:r,msg:a,action:"hwp_send_email",nonce:e.hollerVars.hwpNonce,title:s}}).done(function(e){n.clearChat(r),n.showConfirmation(r),n.conversion(r)}).fail(function(e){console.log(e),n.hideSpinner()})},n.clearChat=function(i){o("#hwp-"+i+" .hwp-chat").hasClass("hwp-hide")||(e.localStorage.removeItem("hwp-full-msg"),o("#hwp-"+i+" .hwp-visitor-row, #hwp-"+i+" .hwp-away-msg").remove()),n.hide(o("#hwp-"+i+" .hwp-email-row"))},n.interactionLink=function(e){if("http://hollerwp.com/"!==e.target.href){var i=o(e.target).closest(".holler-box").attr("id").split("-")[1];n.conversion(i)}},n.conversion=function(i){var t={action:"hwp_track_event",nonce:e.hollerVars.hwpNonce,id:i};o.ajax({method:"GET",url:e.hollerVars.ajaxurl,data:t}).done(function(t){var n=e.hollerVars[i].redirect;n&&(o("#hwp-"+i+" .hwp-first-row").append(' Redirecting... <img src="'+e.hollerVars.pluginUrl+'assets/img/loading.gif" class="hwp-loading" />'),setTimeout(function(){e.location.href=n},1e3))}).fail(function(e){console.log(e)}),n.setCookie("hwp_"+i+"_int","true",1)},n.showConfirmation=function(i){n.hideSpinner();var t=e.hollerVars[i],a=""!=t.confirmMsg?t.confirmMsg:"Thanks!";"holler-banner"===t.type?(o("#hwp-"+i+" .hwp-box-rows").addClass("hwp-full-width").html(a),n.toggleBnrMargin(i)):o("#hwp-"+i+" .hwp-first-row").html(a),"1"===t.showChat&&n.clearChat(i)},n.countNoteShown=function(i){n.noteListeners(i);var t=e.hollerVars[i],a=t.hideForDays?parseInt(t.hideForDays):1;n.setCookie("hwp_"+i+"_shown","true",a);var r={action:"hwp_track_view",nonce:e.hollerVars.hwpNonce,id:i};o.ajax({method:"GET",url:e.hollerVars.ajaxurl,data:r}).done(function(e){}).fail(function(e){})},n.showSpinner=function(i){o("#hwp-"+i+" .hwp-email-row").html('<img src="'+e.hollerVars.pluginUrl+'assets/img/loading.gif" class="hwp-loading" />'),o("#hwp-"+i+" .hwp-name-row").hide()},n.hideSpinner=function(){o("img.hwp-loading").remove()},n.bdClick=function(e){e.stopImmediatePropagation();var i=o(e.currentTarget).data("id");n.toggleHide(i)},n.mouseExit=function(e){var i=o(".holler-box.hwp-show-on-exit")[0];if(i&&!o(i).hasClass("hwp-show")){var t=i.id.split("-")[1];n.doChecks(t,!0)}},n.fomoContent=function(i,t){var a;a=n.getCookie("hwp_fomo"),a=a?parseInt(a)+1:1;var r={action:"hwp_fomo_ajax",nonce:e.hollerVars.hwpNonce,int:a,id:i};o.ajax({method:"GET",url:e.hollerVars.ajaxurl,data:r}).done(function(e){o("#hwp-"+i+" .hwp-first-row").html(e.data),n.transitionIn(t),o("#hwp-"+i+" a").on("click",n.interactionLink),parseInt(a)>10&&(a=1),n.setCookie("hwp_fomo",a,1)}).fail(function(e){console.log(e)})},o(e).load(function(){n.init()}),e.hollerbox=n}(window,document,jQuery);